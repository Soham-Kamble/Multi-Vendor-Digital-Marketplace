{% extends 'myapp/base.html' %}
{% block body %}
<style>
  * {
    box-sizing: border-box;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    background: #f5f6f8;
  }

  .product-form-container {
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 2rem 1rem;
  }

  .form-card {
    width: 100%;
    max-width: 44rem;
    background: #ffffff;
    border-radius: 1rem;
    border: 1px solid #e6e8eb;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);
    overflow: hidden;
    transition: box-shadow 0.2s ease;
  }

  .form-card:hover {
    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.08);
  }

  .form-header {
    padding: 2rem 2.5rem 1rem;
    border-bottom: 1px solid #f0f1f3;
    background: linear-gradient(180deg, #fafbfc, #ffffff);
  }

  .form-title {
    font-size: 1.9rem;
    font-weight: 700;
    color: #222;
    margin-bottom: 0.4rem;
  }

  .form-description {
    color: #6b7280;
    font-size: 0.95rem;
    margin: 0;
  }

  .form-content {
    padding: 2rem 2.5rem 2.5rem;
  }

  .form-group {
    margin-bottom: 1.75rem;
  }

  .form-label {
    display: block;
    font-size: 0.9rem;
    font-weight: 600;
    color: #374151;
    margin-bottom: 0.5rem;
    letter-spacing: 0.01em;
  }

  .form-input-wrapper input[type="text"],
  .form-input-wrapper input[type="number"],
  .form-input-wrapper textarea,
  .form-input-wrapper select {
    width: 100%;
    padding: 0.75rem 0.875rem;
    border: 1px solid #d1d5db;
    border-radius: 0.5rem;
    font-size: 0.95rem;
    transition: all 0.2s ease;
    background: #fff;
    color: #111827;
  }

  .form-input-wrapper input:focus,
  .form-input-wrapper textarea:focus {
    border-color: #6366f1;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
    outline: none;
  }

  .price-input-wrapper {
    position: relative;
  }

  .price-symbol {
    position: absolute;
    left: 0.875rem;
    top: 50%;
    transform: translateY(-50%);
    color: #9ca3af;
    font-weight: 500;
  }

  .price-input-wrapper input {
    padding-left: 1.75rem !important;
  }

  .file-upload-wrapper input[type="file"] {
    width: 100%;
    padding: 0.75rem;
    border: 2px dashed #d1d5db;
    border-radius: 0.5rem;
    background: #f9fafb;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .file-upload-wrapper input[type="file"]:hover {
    border-color: #9ca3af;
    background: #fff;
  }

  .file-upload-wrapper input[type="file"]::file-selector-button {
    padding: 0.45rem 1rem;
    border: 1px solid #d1d5db;
    border-radius: 0.375rem;
    background: #fff;
    color: #374151;
    font-weight: 500;
    cursor: pointer;
    margin-right: 0.75rem;
    transition: all 0.2s ease;
  }

  .file-upload-wrapper input[type="file"]::file-selector-button:hover {
    background: #374151;
    color: white;
    border-color: #374151;
  }

  .file-info {
    font-size: 0.875rem;
    color: #6b7280;
    margin-top: 0.5rem;
  }

  .form-actions {
    display: flex;
    gap: 1rem;
    border-top: 1px solid #f3f4f6;
    padding-top: 1.5rem;
    margin-top: 2rem;
  }

  .btn {
    flex: 1;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    border-radius: 0.5rem;
    font-weight: 600;
    font-size: 0.95rem;
    border: 1px solid transparent;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .btn-primary {
    background: #4f46e5;
    color: white;
  }

  .btn-primary:hover {
    background: #4338ca;
  }

  .btn-danger {
    background: white;
    color: #dc2626;
    border: 1px solid #dc2626;
  }

  .btn-danger:hover {
    background: #dc2626;
    color: white;
  }

  .icon {
    width: 1.1rem;
    height: 1.1rem;
  }

  @media (max-width: 640px) {
    .form-content, .form-header {
      padding: 1.5rem;
    }
  }
</style>

<div class="product-form-container">
  <div class="form-card">
    <div class="form-header">
      <h1 class="form-title">Edit Product</h1>
      <p class="form-description">Make updates to your product details below</p>
    </div>

    <div class="form-content">
      <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="form-group">
          <label class="form-label">Product Name</label>
          <div class="form-input-wrapper">{{ product_form.name }}</div>
        </div>

        <div class="form-group">
          <label class="form-label">Description</label>
          <div class="form-input-wrapper">{{ product_form.description }}</div>
        </div>

        <div class="form-group">
          <label class="form-label">Price</label>
          <div class="price-input-wrapper form-input-wrapper">
            <span class="price-symbol">â‚¹</span>
            {{ product_form.price }}
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Product Image</label>
          <div class="file-upload-wrapper">{{ product_form.image }}</div>
          <p class="file-info" id="file-name"></p>
        </div>

        <div class="form-actions">
          <button class="btn btn-primary" type="submit">
            <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            Update Product
          </button>

          <a class="btn btn-danger" href="{% url 'delete' product.id %}">
            <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
            </svg>
            Delete
          </a>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const fileInput = document.querySelector('input[type="file"]');
    const fileNameDisplay = document.getElementById('file-name');
    
    if (fileInput && fileNameDisplay) {
      fileInput.addEventListener('change', function() {
        if (this.files && this.files[0]) {
          const file = this.files[0];
          const size = (file.size / 1024).toFixed(1);
          fileNameDisplay.textContent = `Selected: ${file.name} (${size} KB)`;
        } else {
          fileNameDisplay.textContent = '';
        }
      });
    }
  });
</script>
{% endblock %}
